@using eCine.Data.ViewModels
@model UserVM


@{
    ViewData["Title"] = "Edit User";

    // Obtener la URL anterior (si existe)
    var previousUrl = ViewData["PreviousUrl"] as string;

    // Si no hay referer, usar la página por defecto
    var fallbackUrl = !string.IsNullOrEmpty(previousUrl)
        ? previousUrl
        : Url.Action("Users", "Account");
}
<head>
    <link rel="stylesheet" href="~/css/select/select2.min.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/select/select2-bootstrap-5-theme.min.css" asp-append-version="true" />

</head>

<div class="d-flex flex-column justify-content-center align-items-center p-2">
    <h1 class="mb-3 text-dark">Edit User</h1>
    <div style="width: 22rem;">
        <form asp-action="EditUsers" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>


            <div class="mb-2">
                <div data-mdb-input-init class="form-outline mt-1">
                    <input asp-for="FullName" class="form-control" />
                    <label asp-for="FullName" class="form-label"></label>
                </div>
                <span asp-validation-for="FullName" class="text-danger error-message p-1"></span>
            </div>

            <div class="mb-2">
                <div data-mdb-input-init class="form-outline mt-1">
                    <input asp-for="UserName" class="form-control" />
                    <label asp-for="UserName" class="form-label"></label>
                </div>
                <span asp-validation-for="UserName" class="text-danger error-message p-1"></span>
            </div>

            <div class="">
                <div data-mdb-input-init class="form-outline">
                    <input asp-for="Email" class="form-control" />
                    <label asp-for="Email" class="form-label"></label>
                </div>
                <span asp-validation-for="Email" class="text-danger error-message p-1"></span>
            </div>

            <div class="mb-4">
                <label asp-for="Role" class="form-label mx-2">Role</label>
                <select asp-for="Role" asp-items="ViewBag.Roles" class="form-select" id="single-select-field" data-placeholder="Roles">
                    <option></option>
                    @*<option>Reactive</option>
                    <option>Solution</option>
                    <option>Conglomeration</option>
                    <option>Algoritm</option>
                    <option>Holistic</option> *@
                </select>
                <span asp-validation-for="Role" class="text-danger error-message p-1"></span>
            </div>



            <div class="d-flex flex-row justify-content-between align-items-center">
                <button type="button" onclick="goBack()"  class="icon-item nav-icon nav-response" data-mdb-toggle="tooltip"
                   data-mdb-placement="bottom" title="Back" data-mdb-ripple-init data-mdb-ripple-color="dark">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-left"
                         width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000"
                         fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M5 12l14 0" />
                        <path d="M5 12l6 6" />
                        <path d="M5 12l6 -6" />
                    </svg>
                </button>
                <button type="submit" class="btn btn-warning">Update</button>
            </div>
        </form>
    </div>
</div>
@* <input type="hidden" asp-for="Id" /> *@

@section Scripts{
    <script type = "text/javascript" src = "~/js/select/select2.full.min.js" ></script>
    <script>

        function goBack(){
             history.back();
        }

        const ids = ['single-select-field','single-select-field1'];
        $(ids).each(function (index) {
            $('#'+this).select2({
                theme: "bootstrap-5",
                width: $(this).data('width') ? $(this).data('width') : $(this).hasClass('w-100') ? '100%' : 'style',
                placeholder: $(this).data('placeholder'),
            });
        });


    </script>
}